#############################################################################################################
## MOD Title:		phpBB Garage 2.0.0
## MOD Author: poyntesm < esmond.poynton[at]gmail[dot]com > (Esmond Poynton) http://forums.phpbbgarage.com/
## MOD Description:
##			This mod allows users of your forum to add details about their vehicles.
##
## MOD Version:		2.0.0 
## 
## Installation Level:	Easy
## Installation Time:	10 Minutes
## Files To Edit: (13)
## 			viewtopic.php
## 			viewonline.php
## 			includes/constants.php
## 			includes/page_header.php
## 			includes/usercp_viewprofile.php
##			language/lang_english/lang_admin.php
##			language/lang_english/lang_main.php
## 			templates/subSilver/subSilver.cfg
## 			templates/subSilver/viewtopic_body.tpl
## 			templates/subSilver/overall_footer.tpl
##			templates/subSilver/overall_header.tpl
##			templates/subSilver/profile_view_body.tpl
##
## Included Files: (84)
##			Install Garage.txt
##			Upgrade.txt
##			contrib/Install Garage.txt
##			contrib/profilcp/
##			contrib/templates/
## 			root/garage.php
## 			root/install_garage.php
##			root/admin/admin_garage_business.php
##			root/admin/admin_garage_categories.php
##			root/admin/admin_garage_config.php
##			root/admin/admin_garage_models.php
##			root/admin/admin_garage_permissions.php
##			root/admin/admin_garage_tools.php
##			root/includes/functions_garage.php
##			root/language/lang_english/lang_garage.php
##			root/language/lang_english/lang_garage_error.php
##			root/templates/subSilver/garage.tpl
##			root/templates/subSilver/garage_browse.tpl
##			root/templates/subSilver/garage_browse_insurance.tpl
##			root/templates/subSilver/garage_edit_comment.tpl
##			root/templates/subSilver/garage_error.tpl
##			root/templates/subSilver/garage_footer.tpl
##			root/templates/subSilver/garage_header.tpl
##			root/templates/subSilver/garage_insurance.tpl
##			root/templates/subSilver/garage_manage_vehicle_gallery.tpl
##			root/templates/subSilver/garage_menu.tpl
##			root/templates/subSilver/garage_modification.tpl
##			root/templates/subSilver/garage_pending.tpl
##			root/templates/subSilver/garage_quartermile.tpl
##			root/templates/subSilver/garage_quartermile_table.tpl
##			root/templates/subSilver/garage_reassign_business.tpl
##			root/templates/subSilver/garage_rollingroad.tpl
##			root/templates/subSilver/garage_rollingroad_table.tpl
##			root/templates/subSilver/garage_search.tpl
##			root/templates/subSilver/garage_user_submit.tpl
##			root/templates/subSilver/garage_user_submit_make.tpl
##			root/templates/subSilver/garage_user_submit_model.tpl
##			root/templates/subSilver/garage_vehicle.tpl
##			root/templates/subSilver/garage_vehicle_select_javascript.tpl
##			root/templates/subSilver/garage_view_garage_business.tpl
##			root/templates/subSilver/garage_view_guestbook.tpl
##			root/templates/subSilver/garage_view_insurance_business.tpl
##			root/templates/subSilver/garage_view_modification.tpl
##			root/templates/subSilver/garage_view_shop_business.tpl
##			root/templates/subSilver/garage_view_vehicle.tpl
##			root/templates/subSilver/admin/garage_business.tpl
##			root/templates/subSilver/admin/garage_business_edit.tpl
##			root/templates/subSilver/admin/garage_category.tpl
##			root/templates/subSilver/admin/garage_category_delete_body.tpl
##			root/templates/subSilver/admin/garage_category_edit_body.tpl
##			root/templates/subSilver/admin/garage_config.tpl
##			root/templates/subSilver/admin/garage_message.tpl
##			root/templates/subSilver/admin/garage_model.tpl
##			root/templates/subSilver/admin/garage_model_delete.tpl
##			root/templates/subSilver/admin/garage_model_edit.tpl
##			root/templates/subSilver/admin/garage_orphans.tpl
##			root/templates/subSilver/admin/garage_permissions.tpl
##			root/templates/subSilver/admin/garage_tools.tpl
##			root/templates/subSilver/images/garage_camera.gif
##			root/templates/subSilver/images/garage_slip.gif
##			root/templates/subSilver/images/lang_english/garage_add_insurance.gif
##			root/templates/subSilver/images/lang_english/garage_add_modification.gif
##			root/templates/subSilver/images/lang_english/garage_add_quartermile.gif
##			root/templates/subSilver/images/lang_english/garage_add_rollingroad.gif
##			root/templates/subSilver/images/lang_english/garage_browse.gif
##			root/templates/subSilver/images/lang_english/garage_create_vehicle.gif
##			root/templates/subSilver/images/lang_english/garage_delete.gif
##			root/templates/subSilver/images/lang_english/garage_delete_vehicle.gif
##			root/templates/subSilver/images/lang_english/garage_edit.gif
##			root/templates/subSilver/images/lang_english/garage_edit_vehicle.gif
##			root/templates/subSilver/images/lang_english/garage_garage_review.gif
##			root/templates/subSilver/images/lang_english/garage_insurance_review.gif
##			root/templates/subSilver/images/lang_english/garage_main_menu.gif
##			root/templates/subSilver/images/lang_english/garage_main_vehicle.gif
##			root/templates/subSilver/images/lang_english/garage_manage_gallery.gif
##			root/templates/subSilver/images/lang_english/garage_no_thumb.gif
##			root/templates/subSilver/images/lang_english/garage_quartermile_table.gif
##			root/templates/subSilver/images/lang_english/garage_rollingroad_table.gif
##			root/templates/subSilver/images/lang_english/garage_search.gif
##			root/templates/subSilver/images/lang_english/garage_shop_review.gif
##			root/templates/subSilver/images/lang_english/garage_view_vehicle.gif
##			root/templates/subSilver/images/lang_english/icon_garage.gif
## License: http://opensource.org/licenses/gpl-license.php GNU General Public License v2 or any later version
######################################################################################
## For security purposes, please check: http://www.phpbb.com/mods/
## for the latest version of this MOD. Although MODs are checked
## before being allowed in the MODs Database there is no guarantee
## that there are no security problems within the MOD. No support
## will be given for MODs not found within the MODs Database which
## can be found at http://www.phpbb.com/mods/
###################################################################################### 
## Author Notes: 
##
##	- This Mod Was Inspired By IPB Based Garage By Matthew C. Veno
##
######################################################################################
## MOD History: 
##   27-02-2006 - Version 1.0.2
##	- Fix javascript error on adding a new model
##	- Fix setting private permissions
##	- Fix offset year
##	- Fix userlink in viewing insurance business
##
##   01-02-2006 - Version 1.0.0
##	- Version Submitted To phpBB.com's MOD DB. (Resubmitted with changes 01-02-2006)
##	- Version Submitted To phpBB.com's MOD DB. (Resubmitted with one change 08-01-2006)
##
###################################################################################### 
## Before Adding This MOD To Your Forum, You Should Back Up All Files Related To This MOD 
###################################################################################### 

#
#-----[ COPY ]------------------------------------------
#
copy root/*.* TO *.*

#
#-----[ DIY INSTRUCTIONS ]------------------------------------------
#
Create directory ./garage 
Create directory ./garage/upload 
Chmod ./garage/ to 755
Chmod ./garage/upload to 777
Open your web browser and run install_garage.php
Delete install_garage.php if it ran succesfully

#-----[ OPEN ]----- 
# 
styles/subSilver/imageset/imageset.cfg

#
#-----[ FIND ]------------------------------------------
#
img_button_topic_reply = {LANG}/button_topic_reply.gif*27*97

#
#-----[ AFTER, ADD ]------------------------------------------
#

//-- mod start : Garage ----------------------------------------------------------------------------------------------------
//-- add
img_vehicle_img_attached	= garage_camera.gif*13*18
img_slip_img_attached		= garage_slip.gif*13*12
img_icon_garage			= {LANG}/icon_garage.gif*18*59
img_garage_main_menu		= {LANG}/garage_main_menu.gif*33*130
img_garage_browse		= {LANG}/garage_browse.gif*33*130
img_garage_search		= {LANG}/garage_search.gif*33*130
img_garage_quartermile_table	= {LANG}/garage_quartermile_table.gif*33*130
img_garage_rollingroad_table	= {LANG}/garage_rollingroad_table.gif*33*130
img_garage_garage_review	= {LANG}/garage_garage_review.gif*33*130
img_garage_shop_review		= {LANG}/garage_shop_review.gif*33*130
img_garage_insurance_review	= {LANG}/garage_insurance_review.gif*33*130
img_garage_create_vehicle	= {LANG}/garage_create_vehicle.gif*33*130
img_garage_edit_vehicle		= {LANG}/garage_edit_vehicle.gif*33*130
img_garage_delete_vehicle	= {LANG}/garage_delete_vehicle.gif*33*130
img_garage_view_vehicle		= {LANG}/garage_view_vehicle.gif*33*130
img_garage_add_modification	= {LANG}/garage_add_modification.gif*33*130
img_garage_add_insurance	= {LANG}/garage_add_insurance.gif*33*130
img_garage_add_rollingroad	= {LANG}/garage_add_rollingroad.gif*33*130
img_garage_add_quartermile	= {LANG}/garage_add_quartermile.gif*33*130
img_garage_manage_gallery	= {LANG}/garage_manage_gallery.gif*33*130
img_garage_edit			= {LANG}/garage_edit.gif*21*34
img_garage_delete		= {LANG}/garage_delete.gif*21*34
img_garage_main_vehicle		= {LANG}/garage_main_vehicle.gif*33*130
img_garage_no_thumb		= {LANG}/garage_no_thumb.gif*33*130
img_garage_show_details		= {LANG}/garage_show_details.gif*21*34
img_garage_hide_details		= {LANG}/garage_hide_details.gif*21*34
img_garage_move_up		= {LANG}/garage_move_up.gif*21*34
img_garage_move_down		= {LANG}/garage_move_down.gif*21*34
img_garage_set_approved		= {LANG}/garage_set_approved.gif*21*34
img_garage_set_pending		= {LANG}/garage_set_pending.gif*21*34
//-- mod finish : Garage ---------------------------------------------------------------------------------------------------

# 
#-----[ OPEN ]----- 
# 
styles/subSilver/templates/overall_header.html

#
#-----[ FIND ]------------------------------------------
#
<td class="genmed" align="right">

#
#-----[ IN-LINE FIND ]------------------------------------------
#
<td class="genmed" align="right">

#
#-----[ IN-LINE AFTER, ADD ]------------------------------------------
#
<!-- IF S_DISPLAY_GARAGE --><a href="{U_GARAGE}" class="mainmenu"><img src="{T_THEME_PATH}/images/icon_mini_members.gif" width="12" height="13" border="0" alt="{L_GARAGE}" hspace="3" /> {L_GARAGE}</a>&nbsp; &nbsp;<!-- ENDIF --><!-- IF S_DISPLAY_QUARTERMILE --><a href="{U_QUARTERMILE}" class="mainmenu"><img src="{T_THEME_PATH}/images/icon_mini_members.gif" width="12" height="13" border="0" alt="{L_QUARTERMILE}" hspace="3" /> {L_QUARTERMILE}</a>&nbsp; &nbsp;<!-- ENDIF --><!-- IF S_DISPLAY_DYNORUN --><a href="{U_DYNORUN}" class="mainmenu"><img src="{T_THEME_PATH}/images/icon_mini_members.gif" width="12" height="13" border="0" alt="{L_DYNORUN}" hspace="3" /> {L_DYNORUN}</a>&nbsp; &nbsp;<!-- ENDIF -->

# 
#-----[ OPEN ]----- 
# 
styles/subSilver/template/overall_footer.html

#
#-----[ FIND ]------------------------------------------
#
	<!-- IF U_ACP --><span class="gensmall">[ <a href="{U_ACP}">{L_ACP}</a> ]</span><br /><br /><!-- ENDIF -->

#
#-----[ BEFORE, ADD ]------------------------------------------
#
	<!-- IF U_PENDING --><span class="gensmall">[ <a href="{U_PENDING}">{L_PENDING_GARAGE_ITEMS}</a> ]</span><!-- ENDIF -->

# 
#-----[ OPEN ]----- 
# 
includes/functions.php

#
#-----[ FIND ]------------------------------------------
#
<?php

#
#-----[ AFTER, ADD ]------------------------------------------
#
//-- mod : Garage ----------------------------------------------------------------------------------------------------------

#
#-----[ FIND ]------------------------------------------
#
		'U_FAQ'					=> append_sid("{$phpbb_root_path}faq.$phpEx"),

#
#-----[ AFTER, ADD ]------------------------------------------
#
//-- mod start : Garage ----------------------------------------------------------------------------------------------------
//-- add
		'U_GARAGE' 			=> append_sid("{$phpbb_root_path}garage.$phpEx"),
		'U_QUARTERMILE' 		=> append_sid("{$phpbb_root_path}garage.$phpEx", 'mode=quartermile'),
		'U_DYNORUN' 			=> append_sid("{$phpbb_root_path}garage.$phpEx", 'mode=dynorun'),
		'S_DISPLAY_GARAGE'		=> (isset($auth)) ? $auth->acl_get('u_garage_browse') : 0,
		'S_DISPLAY_QUARTERMILE'		=> (isset($auth)) ? $auth->acl_get('u_garage_browse') : 0,
		'S_DISPLAY_DYNORUN'		=> (isset($auth)) ? $auth->acl_get('u_garage_browse') : 0,
//-- mod finish : Garage ---------------------------------------------------------------------------------------------------

#
#-----[ FIND ]------------------------------------------
#
		'U_ACP' => ($auth->acl_get('a_') && $user->data['is_registered']) ? "{$phpbb_root_path}adm/index.$phpEx?sid=" . $user->session_id : '')

#
#-----[ BEFORE, ADD ]------------------------------------------
#
//-- mod start : Garage ----------------------------------------------------------------------------------------------------
//-- add
		'U_PENDING' => ($auth->acl_get('m_garage') && $user->data['is_registered']) ? append_sid("{$phpbb_root_path}garage.$phpEx", "&mode=garage_pending", true, $user->session_id) : '',
//-- mod finish : Garage ---------------------------------------------------------------------------------------------------

# 
#-----[ OPEN ]----- 
# 
language/en/common.php
#
#-----[ FIND ]------------------------------------------
#
<?php

#
#-----[ AFTER, ADD ]------------------------------------------
#
//-- mod : Garage ----------------------------------------------------------------------------------------------------------
#
#-----[ FIND ]------------------------------------------
#
	'FAQ'					=> 'FAQ',

#
#-----[ BEFORE, ADD ]------------------------------------------
#
//-- mod start : Garage ----------------------------------------------------------------------------------------------------
//-- add
	'GARAGE'				=> 'Garage',
	'QUARTERMILE'				=> '1/4 Mile',
	'DYNORUN'				=> 'Dynorun',
	'PENDING_GARAGE_ITEMS'			=> 'Pending Garage Items',
	'VIEWING_GARAGE'			=> 'Viewing Garage',
	'VIEW_USERS_GARAGE'			=> 'View user\'s Garage',
//-- mod finish : Garage ---------------------------------------------------------------------------------------------------

# 
#-----[ OPEN ]----- 
# 
includes/constants.php

#
#-----[ FIND ]------------------------------------------
#
<?php

#
#-----[ AFTER, ADD ]------------------------------------------
#
//-- mod : Garage ----------------------------------------------------------------------------------------------------------
#
#-----[ FIND ]------------------------------------------
#
?>

#
#-----[ BEFORE, ADD ]------------------------------------------
#
//-- mod start : Garage ----------------------------------------------------------------------------------------------------
//-- add
define('GARAGE_TABLE', $table_prefix.'garage');
define('GARAGE_CONFIG_TABLE', $table_prefix.'garage_config');
define('GARAGE_CATEGORIES_TABLE', $table_prefix.'garage_categories');
define('GARAGE_GALLERY_TABLE', $table_prefix.'garage_gallery');
define('GARAGE_GUESTBOOKS_TABLE', $table_prefix.'garage_guestbooks');
define('GARAGE_IMAGES_TABLE', $table_prefix.'garage_images');
define('GARAGE_MAKES_TABLE', $table_prefix.'garage_makes');
define('GARAGE_MODELS_TABLE', $table_prefix.'garage_models');
define('GARAGE_MODS_TABLE', $table_prefix.'garage_mods');
define('GARAGE_QUARTERMILE_TABLE', $table_prefix.'garage_quartermile');
define('GARAGE_DYNORUN_TABLE', $table_prefix.'garage_dynorun');
define('GARAGE_BUSINESS_TABLE', $table_prefix.'garage_business');
define('GARAGE_INSURANCE_TABLE', $table_prefix.'garage_insurance');
define('GARAGE_RATING_TABLE', $table_prefix.'garage_rating');
define('GARAGE_VEHICLE_FIELDS_TABLE', $table_prefix.'garage_vehicle_fields');
define('GARAGE_VEHICLE_FIELDS_DATA_TABLE', $table_prefix.'garage_vehicle_fields_data');
define('GARAGE_VEHICLE_FIELDS_LANG_TABLE', $table_prefix.'garage_vehicle_fields_lang');
define('GARAGE_VEHICLE_LANG_TABLE', $table_prefix.'garage_vehicle_lang');
define('GARAGE_UPLOAD_PATH', 'garage/upload/');
//-- mod finish : Garage ---------------------------------------------------------------------------------------------------

# 
#-----[ OPEN ]----- 
# 
viewonline.php

#
#-----[ FIND ]------------------------------------------
#
<?php

#
#-----[ AFTER, ADD ]------------------------------------------
//-- mod : Garage ----------------------------------------------------------------------------------------------------------

#
#-----[ FIND ]------------------------------------------
#
		case 'report':
			$location = $user->lang['REPORTING_POST'];
			$location_url = append_sid("{$phpbb_root_path}index.$phpEx");
		break;

#
#-----[ AFTER, ADD ]------------------------------------------
#
//-- mod start : Garage ----------------------------------------------------------------------------------------------------
//-- add
		case 'garage':
			$location = $user->lang['VIEWING_GARAGE'];
			$location_url = append_sid("{$phpbb_root_path}garage.$phpEx");
		break;
//-- mod finish : Garage ---------------------------------------------------------------------------------------------------

# 
#-----[ OPEN ]----- 
# 
language/en/acp/common.php

#
#-----[ FIND ]------------------------------------------
#
<?php

#
#-----[ AFTER, ADD ]------------------------------------------
#
//-- mod : Garage ----------------------------------------------------------------------------------------------------------


#
#-----[ FIND ]------------------------------------------
#
	'ACP_LOGGING'				=> 'Logging',

#
#-----[ AFTER, ADD ]------------------------------------------
#
//-- mod start : Garage ----------------------------------------------------------------------------------------------------
//-- add
	'ACP_GARAGE'			=> 'Garage',
	'ACP_GARAGE_BUSINESS'		=> 'Business Management',
	'ACP_GARAGE_CATEGORIES'		=> 'Category Management',
	'ACP_GARAGE_SETTINGS'		=> 'Settings',
	'ACP_GARAGE_MODELS'	 	=> 'Make/Model Managment',
	'ACP_GARAGE_QUOTAS'		=> 'Quotas',
	'ACP_GARAGE_TOOLS'		=> 'Tools',
//-- mod finish : Garage ---------------------------------------------------------------------------------------------------

#
#-----[ SAVE/CLOSE ALL FILES ]------------------------------------------
#
# EoM

// To Do
Map auths added to phpbb_acl_options to roles in phpbb_acl_roles_data so on install admins & global moderators get permissions required & regiestered users too!!
